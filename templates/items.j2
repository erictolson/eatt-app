<html>
<!-- Adapted from the people.html UI design -->

<head>
	<title>EATT Items</title>
	<link href="style.css" rel="stylesheet" type="text/css" />
	<script language="JavaScript">
		function showform(dowhat) {
			/*
			 * four DIVS: browse, insert, update, delete
			 * this function sets one visible the others not
			 */
			if (dowhat == 'insert') {
				document.getElementById('browse').style.display = 'none';
				document.getElementById('insert').style.display = 'block';
				document.getElementById('edit').style.display = 'none';
				document.getElementById('delete').style.display = 'none';
			} else if (dowhat == 'update') {
				document.getElementById('browse').style.display = 'none';
				document.getElementById('insert').style.display = 'none';
				document.getElementById('edit').style.display = 'block';
				document.getElementById('delete').style.display = 'none';
			} else if (dowhat == 'delete') {
				document.getElementById('browse').style.display = 'none';
				document.getElementById('insert').style.display = 'none';
				document.getElementById('edit').style.display = 'none';
				document.getElementById('delete').style.display = 'block';
			} else if (dowhat == 'all') {
				document.getElementById('browse').style.display = 'block';
				document.getElementById('insert').style.display = 'block';
				document.getElementById('edit').style.display = 'block';
				document.getElementById('delete').style.display = 'block';
			} else { //by default display browse
				document.getElementById('browse').style.display = 'block';
				document.getElementById('insert').style.display = 'none';
				document.getElementById('edit').style.display = 'none';
				document.getElementById('delete').style.display = 'none';
			}
		}
		function newItems() {
			showform('insert');
		}
		function updateItems(pid) {
			showform('update');
		}
		function deleteItems(pid) {
			showform('delete');
		}
		function browseItems() {
			showform('browse');
		}
		function showAll() {
			showform('all');
		}
	</script>
</head>

<body onload="browseItems()">
	<nav>
        <a href="/">Homepage</a>
        <a href="orders">Orders</a>
        <a href="customers">Customers</a>
        <a href="drivers">Drivers</a>
        <a href="items">Items</a>
        <a href="discounts">Discounts</a>
        <a href="order_items">Order Items</a>
    </nav>
	<h1>Browse Items</h1>
	<div id="browse">
		<p><a href="#" onClick="newItems()">Add Item</a> </p>
		<table border="1" cellpadding="5">
			<!-- Access data tuple passed from app.py -->
			{% if data %}
			<thead>
				<tr>
					<!-- Iterate through each key in the first entry to get the column name -->
					{% for key in data[0].keys() %}

					<!-- Create a <th> tag with the key inside of it, this will be our header row -->
					<th scope="col" data-field="{{ key }}" data-filter-control="input">{{ key }}</th>

					<!-- End of this for loop -->
					{% endfor %}
				</tr>

			<tbody>
				<!-- Now, iterate through every item in data -->{% for item in data %}
				<tr>
					<!-- Then iterate through every key in the current item dictionary -->
					{% for key in item.keys() %}

					<!-- Create a <td> element with the value of that key in it -->
					<td> {{item[key]}} </td>
					{% endfor %}

					<!-- Create our edit/delete buttons -->
					<td><a href="edit_items/{{item.itemID}}" class="btn btn-default">Edit</a></td>
					<td><a href="delete_items/{{item.itemID}}" class="btn btn-default">Delete</a></td>

				</tr>
				{% endfor %}
				{% endif %}
		</table>
		<p>&nbsp;</p>
	</div> <!-- browse -->

	<div id="insert">
		<!-- form to INSERT new data into Items-->
		<form id="insertItems" action="/items" method="post">
			<legend><strong>Add Discount</strong></legend>
			<fieldset>
				<!-- placeholder shows ghost text, required forces an input, pattern forces input adherence -->
			
				<label for="iname">Name:</label>
				<input type="text" class="form-control" id="iname" name="iname" placeholder="" required>

				<label for="price">Price:</label>
				<input type="number" step="any" class="form-control" id="price" name="price" placeholder="" required>

			</fieldset>

			<!-- Create 'Add Item' and 'Cancel' buttons -->
			<input type="submit" value="Add Item" name="Add_Items" class="btn btn-primary"
				style="margin:.5rem;">
			<input class="btn" type="button" value="Cancel" onClick="browseItems()">
		</form>
	</div>
	<!--insert-->

    <div id="edit">
		<!-- form to edit data in items-->
		<form id="editItem" action="/edit_items/{{data[0].itemID}}" method="post">
			<legend><strong>Edit Item</strong></legend>
			<fieldset>
				<input type="hidden" value="{{data[0].itemID}}" class="form-control" id="itemID" name="itemID" required>
				<label for="make">first name:</label>

				<label for="iname">Name:</label>
				<input type="text" class="form-control" id="iname" name="iname" " placeholder="{{data[0].name}}" required>

				<label for="price">Price:</label>
				<input type="number" step="any" class="form-control" id="price" name="price" placeholder="{{data[0].price}}"  required>

			</fieldset>
				<input class="btn" type="button" value="Cancel" onClick="browsePeople()" style="margin:.5rem;"> 
        </form>
	</div><!--edit-->
</body>
</html>